# @configure_input@

# Package-related substitution variables
package        = @PACKAGE_NAME@
version        = @PACKAGE_VERSION@
tarname        = @PACKAGE_TARNAME@
distdir        = $(tarname)-$(version)

# Prefix-related substitution variables
PREFIX		= @prefix@
BINDIR		= @bindir@

# Compiler-related variables
CC		= @CC@
CFLAGS		= @CFLAGS@
INCLUDES	= -I/usr/include
LIBS		= -lssl -lcrypto

# Linking-related variables
LDFLAGS		= @LDFLAGS@

SRCS		= nma.c main.c
OBJS		= $(SRCS:.c=.o)
MAIN		= nma

.PHONY:	clean

all: $(MAIN)

$(MAIN): $(OBJS)
	$(CC) $(CFLAGS) $(INCLUDES) -o $(MAIN) $(OBJS) $(LFLAGS) $(LIBS)

install: nma
	$(INSTALL) install -Dm 0755 nma $(PREFIX)/bin/nma

clean:
	rm *.o
	rm $(MAIN)

Makefile: Makefile.in ../config.status
	cd .. && ./config.status $@

config.status: configure
	cd .. && ./config.status --recheck
